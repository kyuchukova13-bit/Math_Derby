<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ –î–µ—Ä–±–∏ 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Fredoka:wght@600;700&display=swap" rel="stylesheet">
    <style>
        :root { --grass: #43a047; --lines: rgba(255, 255, 255, 0.9); --scoreboard-bg: #0d2e1a; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #0a2211; font-family: 'Fredoka', sans-serif; }

        /* –ú–ï–ù–Æ */
        #menu, #end-screen { position: absolute; inset: 0; background: rgba(0,0,0,0.95); z-index: 1000; display: flex; justify-content: center; align-items: center; }
        .menu-card { 
            background: white; padding: 30px; border-radius: 30px; text-align: center; 
            width: 850px; max-width: 95%; border: 8px solid #4CAF50; 
            display: flex; flex-direction: column; gap: 12px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            position: relative; /* –ó–∞ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–∞–Ω–µ –Ω–∞ –ø–æ–¥–ø–∏—Å–∞ —Å–ø—Ä—è–º–æ –∫–∞—Ä—Ç–∞—Ç–∞ */
        }
        
        h1 { font-family: 'Bangers'; color: #2e7d32; font-size: 3.5rem; margin: 0; line-height: 1; }
        
        .instructions { background: #f9f9f9; padding: 10px; border-radius: 15px; border-left: 5px solid #4CAF50; font-size: 0.95rem; color: #444; text-align: left; }
        
        .input-name { padding: 12px; font-size: 1.3rem; border-radius: 12px; border: 3px solid #ddd; text-align: center; width: 80%; align-self: center; }

        .op-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 5px 0; }
        .op-item { background: #eee; padding: 10px; border-radius: 10px; display: flex; align-items: center; cursor: pointer; font-size: 1rem; font-weight: bold; }
        .op-item input { margin-right: 12px; width: 20px; height: 20px; }

        #start-btn, .retry-btn { width: 100%; padding: 15px; background: #2e7d32; color: white; border: none; border-radius: 15px; font-family: 'Bangers'; font-size: 2.2rem; cursor: pointer; box-shadow: 0 8px #1b5e20; transition: 0.2s; }

       .author-signature {
    position: absolute;
    bottom: 20px;
    right: 30px;
    color: rgba(255, 255, 255, 0.4); /* –ë—è–ª–æ —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç –∑–∞ –¥–∏—Å–∫—Ä–µ—Ç–Ω–æ—Å—Ç */
    font-size: 0.9rem;
    font-family: 'Fredoka', sans-serif;
    z-index: 2000; /* –ó–∞ –¥–∞ –µ –≤–∏–Ω–∞–≥–∏ –æ—Ç–≥–æ—Ä–µ */
    pointer-events: none; /* –î–∞ –Ω–µ –ø—Ä–µ—á–∏ –Ω–∞ –∫–ª–∏–∫–æ–≤–µ—Ç–µ */
}

        /* –ò–ì–†–ò–©–ï */
        #stadium { display: none; position: relative; width: 100vw; height: 100vh; background: var(--grass); }
        .field-lines { position: absolute; inset: 20px; border: 5px solid var(--lines); pointer-events: none; }
        .center-line { position: absolute; left: 50%; top: 20px; bottom: 20px; width: 5px; background: var(--lines); transform: translateX(-50%); }
        .center-circle { position: absolute; left: 50%; top: 50%; width: 160px; height: 160px; border: 5px solid var(--lines); border-radius: 50%; transform: translate(-50%, -50%); }

        .goal { position: absolute; width: 60px; height: 220px; border: 5px solid white; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.15); z-index: 5; }
        .goal-pc { left: 20px; border-left: none; }
        .goal-user { right: 20px; border-right: none; }

        #scoreboard { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); background: var(--scoreboard-bg); border: 6px solid #225533; border-radius: 20px; width: 500px; padding: 10px; text-align: center; z-index: 100; }
        .scores { display: flex; align-items: center; gap: 40px; color: #00ff00; font-family: 'Bangers'; font-size: 3.5rem; justify-content: center; }
        .team-tag { font-size: 0.9rem; color: #aaa; font-family: 'Fredoka'; display: block; }

        #problem-zone { position: absolute; bottom: 180px; width: 100%; text-align: center; font-family: 'Bangers'; font-size: 6rem; color: white; text-shadow: 5px 5px 0 #000; z-index: 50; }
        #ball { position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); font-size: 4rem; transition: 0.8s; z-index: 10; }
        .player { position: absolute; top: 50%; transform: translateY(-50%); font-size: 7rem; display: none; z-index: 20; }
        
        #player-user { right: 35%; transform: translateY(-50%) scaleX(1); } 
        #player-pc { left: 35%; transform: translateY(-50%) scaleX(-1); filter: hue-rotate(300deg); }

        .controls { position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%); display: flex; gap: 15px; z-index: 500; }
        input[type="number"] { padding: 10px; width: 130px; border-radius: 12px; border: 4px solid #113322; font-size: 2.5rem; text-align: center; }
        #kick-btn { padding: 10px 35px; border-radius: 12px; border: none; background: #ff5722; color: white; font-family: 'Bangers'; font-size: 2rem; cursor: pointer; box-shadow: 0 6px #bf360c; }
        #quit-btn { padding: 10px 20px; border-radius: 12px; border: none; background: #777; color: white; font-family: 'Fredoka'; font-size: 1.1rem; cursor: pointer; }

        .to-left { left: 5% !important; transform: translate(0, -50%) rotate(-720deg) !important; }
        .to-right { left: 95% !important; transform: translate(0, -50%) rotate(720deg) !important; }
        #high-score-msg { color: #ffeb3b; font-size: 1.1rem; margin-top: 5px; font-weight: bold; }
    </style>
</head>
<body>

    <div id="menu">
        <div class="menu-card">
            <h1>–ú–ê–¢–ï–ú–ê–¢–ò–ß–ï–°–ö–û –î–ï–†–ë–ò</h1>
            
            <div class="instructions">
                <b>–ö–∞–∫ —Å–µ –∏–≥—Ä–∞–µ:</b><br>
                ‚öΩ –ù–∞–ø–∏—à–∏ –∏–º–µ—Ç–æ —Å–∏, –∑–∞ –¥–∞ –∑–∞–ø–∞–∑–∏—à —Ä–µ–∫–æ—Ä–¥–∞ —Å–∏.<br>
                ‚öΩ –†–µ—à–∏ –∑–∞–¥–∞—á–∞—Ç–∞ –ø—Ä–∞–≤–∏–ª–Ω–æ, –∑–∞ –¥–∞ –≤–∫–∞—Ä–∞—à –≥–æ–ª!<br>
                ‚öΩ –ê–∫–æ —Å–≥—Ä–µ—à–∏—à, –†–û–ë–û —â–µ –æ—Ç–±–µ–ª–µ–∂–∏ –≥–æ–ª!
            </div>

            <input type="text" id="player-name" class="input-name" placeholder="–¢–≤–æ–µ—Ç–æ –∏–º–µ —Ç—É–∫..." maxlength="12">
            
            <p style="font-weight:bold; margin:0;">–ò–ó–ë–ï–†–ò –î–ï–ô–°–¢–í–ò–Ø:</p>
            <div class="op-grid">
                <label class="op-item"><input type="checkbox" value="+" checked> –°–™–ë–ò–†–ê–ù–ï (+)</label>
                <label class="op-item"><input type="checkbox" value="-" checked> –ò–ó–í–ê–ñ–î–ê–ù–ï (-)</label>
                <label class="op-item"><input type="checkbox" value="*"> –£–ú–ù–û–ñ–ï–ù–ò–ï (√ó)</label>
                <label class="op-item"><input type="checkbox" value="/"> –î–ï–õ–ï–ù–ò–ï (√∑)</label>
            </div>
            <button id="start-btn">–ù–ê–ß–ê–õ–û –ù–ê –ú–ê–ß–ê!</button>

            <div class="credits">–°—ä–∑–¥–∞–¥–µ–Ω–æ —Å ‚ù§Ô∏è –æ—Ç –î–æ—á–∫–∞ –ö—é—á—É–∫–æ–≤–∞ </div>
        </div>
    </div>

    <div id="end-screen" style="display:none;">
        <div class="menu-card">
            <h1>–ö–†–ê–ô –ù–ê –ú–ê–ß–ê!</h1>
            <div id="final-stats" style="font-size: 1.5rem; line-height: 1.6;"></div>
            <button class="retry-btn" onclick="location.reload()">–ò–ì–†–ê–ô –ü–ê–ö</button>
        </div>
    </div>

    <div id="stadium">
        <div class="field-lines"></div>
        <div class="center-line"></div>
        <div class="center-circle"></div>
        <div class="goal goal-pc"></div>
        <div class="goal goal-user"></div>

        <div id="scoreboard">
            <div class="scores">
                <div style="text-align:center; color:#ff5555"><span id="p-score">0</span><span class="team-tag">–†–û–ë–û</span></div>
                <div style="margin: 0 15px; color:#447755">VS</div>
                <div style="text-align:center"><span id="u-score">0</span><span class="team-tag" id="display-name">–¢–ò</span></div>
            </div>
            <div id="high-score-msg"></div>
            <div id="status-msg" style="color:#ffeb3b; font-weight:bold; margin-top:5px;">–ì–û–¢–û–í?</div>
        </div>

        <div id="player-user" class="player">üèÉ‚Äç‚ôÇÔ∏è</div>
        <div id="player-pc" class="player">üèÉ‚Äç‚ôÇÔ∏è</div>
        <div id="ball">‚öΩ</div>
        <div id="problem-zone">?</div>

        <div class="controls">
            <input type="number" id="ans" placeholder="?">
            <button id="kick-btn">–®–£–¢!</button>
            <button id="quit-btn" onclick="endGame()">–ö–†–ê–ô</button>
        </div>
    </div>

    <script>
        let uScore = 0, pScore = 0, correct = 0, playerName = "–ò–≥—Ä–∞—á";
        const audio = new (window.AudioContext || window.webkitAudioContext)();

        function playSound(f, d, type='sine') {
            const o = audio.createOscillator(), g = audio.createGain();
            o.type = type; o.frequency.value = f; o.connect(g); g.connect(audio.destination);
            g.gain.setValueAtTime(0.1, audio.currentTime); g.gain.exponentialRampToValueAtTime(0.01, audio.currentTime + d);
            o.start(); o.stop(audio.currentTime + d);
        }

        function nextTask() {
            const ops = Array.from(document.querySelectorAll('input[type="checkbox"]:checked')).map(i => i.value);
            const op = ops[Math.floor(Math.random() * ops.length)] || '+';
            let n1, n2;
            if (op==='+') { n1=Math.floor(Math.random()*50); n2=Math.floor(Math.random()*45); correct=n1+n2; }
            else if (op==='-') { n1=Math.floor(Math.random()*90)+10; n2=Math.floor(Math.random()*n1); correct=n1-n2; }
            else if (op==='*') { n1=Math.floor(Math.random()*10); n2=Math.floor(Math.random()*10); correct=n1*n2; }
            else { correct=Math.floor(Math.random()*9)+1; n2=Math.floor(Math.random()*9)+1; n1=correct*n2; }

            document.getElementById('problem-zone').innerText = `${n1} ${op.replace('*','√ó').replace('/','√∑')} ${n2} = ?`;
            document.getElementById('ball').className = '';
            document.querySelectorAll('.player').forEach(p => p.style.display = 'none');
            document.getElementById('ans').value = ''; document.getElementById('ans').focus();
        }

        document.getElementById('start-btn').onclick = () => {
            if(document.querySelectorAll('input:checked').length === 0) return alert("–ò–∑–±–µ—Ä–∏ –¥–µ–π—Å—Ç–≤–∏–µ!");
            playerName = document.getElementById('player-name').value.trim() || "–ò–≥—Ä–∞—á";
            document.getElementById('display-name').innerText = playerName.toUpperCase();
            
            let record = localStorage.getItem('score_' + playerName) || 0;
            document.getElementById('high-score-msg').innerText = "–†–ï–ö–û–†–î: " + record;

            document.getElementById('menu').style.display = 'none';
            document.getElementById('stadium').style.display = 'block';
            nextTask();
        };

        function kick() {
            const val = parseInt(document.getElementById('ans').value);
            if (isNaN(val)) return;
            const ball = document.getElementById('ball');
            const status = document.getElementById('status-msg');

            if (val === correct) {
                document.getElementById('player-user').style.display = 'block';
                playSound(150, 0.2, 'square');
                setTimeout(() => {
                    ball.classList.add('to-left');
                    setTimeout(() => {
                        uScore++; document.getElementById('u-score').innerText = uScore;
                        status.innerText = "–ì–û–û–û–û–õ!"; playSound(440, 0.5);
                        setTimeout(nextTask, 1500);
                    }, 700);
                }, 100);
            } else {
                document.getElementById('player-pc').style.display = 'block';
                playSound(100, 0.2, 'square');
                setTimeout(() => {
                    ball.classList.add('to-right');
                    setTimeout(() => {
                        pScore++; document.getElementById('p-score').innerText = pScore;
                        status.innerText = "–ì–û–õ –ó–ê –†–û–ë–û!"; playSound(110, 0.5, 'sawtooth');
                        setTimeout(nextTask, 1500);
                    }, 700);
                }, 100);
            }
        }

        function endGame() {
            let oldRecord = parseInt(localStorage.getItem('score_' + playerName)) || 0;
            let isNewRecord = uScore > oldRecord;
            if(isNewRecord) localStorage.setItem('score_' + playerName, uScore);

            document.getElementById('stadium').style.display = 'none';
            document.getElementById('end-screen').style.display = 'flex';
            
            document.getElementById('final-stats').innerHTML = `
                <p>–ë–†–ê–í–û, <b>${playerName}</b>!</p>
                <p>–†–ï–ó–£–õ–¢–ê–¢: <span style="color:green; font-size:2rem">${uScore}</span> - –†–û–ë–û: <span style="color:red; font-size:2rem">${pScore}</span></p>
                ${isNewRecord ? '<h2 style="color:#ff9800">–ù–û–í –†–ï–ö–û–†! ü•á</h2>' : `<p>–¢–≤–æ—è—Ç —Ä–µ–∫–æ—Ä–¥ –µ: ${localStorage.getItem('score_' + playerName)}</p>`}
            `;
        }

        document.getElementById('kick-btn').onclick = kick;
        document.getElementById('ans').onkeypress = (e) => { if(e.key === 'Enter') kick(); };
    </script>
</body>
</html>
